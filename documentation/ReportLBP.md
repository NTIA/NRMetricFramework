# Report on Local Binary Pattern (LBP)

_Go to [Report.md](Report.md) for an introduction to this series of NR metric reports, including their purpose, important warnings, the rating scale, and details of the statistical analysis._ 

Function `nrff_LBP.m` implements the Local Binary Pattern (LBP), which is presented in [[24]](Publications.md) and [[25]](Publications.md). LBP is intended for texture classification. This report instead evaluates whether LBP could be used to assess image quality. 

Goal | Metric Name|Rating
-----|------------|------
MOS  | LBP | :star: 
RCA  | LBP | :star: :star:

__R&D Potential__: LBP might be useful for RCA, if a pattern can be found among images that produce high values of LBP.

## Algorithm Summary
This algorithm divides the image into 3x3 blocks, examines the local binary patterns for each block, and produces one value for each 3x3 block. When examining each block, the algorithm compares edge pixels to the center pixel and calculates an overall value based on the differences observed. The output of the LBP algorithm is a matrix of per-block values. We chose to take the average LBP, to allow per-media analyses. 

## Speed and Conformity
LBP took __2.5Ã—__ as long to run as the benchmark metric, [nrff_blur.md](ReportBlur.md), but our implementation may be inefficient. 

Assuming that the division into blocks is itself not truly a part of the central algorithm, LBP runs in O(n) time where n is the number of blocks generated by the block division algorithm. 

In terms of the summations and piecewise functions, our implementation closely follows the published algorithm. The only true issue was how to summarize the matrix of LBP values as one value; the natural choice was to take the mean value. 

## Analysis
The LBP algorithm was not intended for MOS assessment.

The LBP algorithm is evaluated using six image quality datasets that contain camera impairments. The LBP scatter plots have a lower triangle shape (i.e., narrow range of values for high quality, wide range of values for low quality). We expect this shape when an impairment occurs sporadically. Thus, LBP does not appear suitable for assessing MOS, but it may have value as RCA for a particular impairment, provided a pattern can be observed among the media that produce high values of LBP.
```
--------------------------------------------------------------
1) local_binary_patterns
bid              corr =  0.17  rmse =  1.00  percentiles [14883.96,16207.17,16496.43,16975.83,26569.30]
ccriq            corr =  0.20  rmse =  1.00  percentiles [15021.65,16628.54,17058.33,17681.91,32287.59]
cid2013          corr =  0.11  rmse =  0.89  percentiles [15715.72,16528.16,16871.07,17606.91,32629.01]
C&V              corr =  0.14  rmse =  0.71  percentiles [15466.58,16587.82,17134.97,17966.60,26315.56]
its4s2           corr =  0.01  rmse =  0.74  percentiles [12260.71,16408.45,16898.74,17801.49,28778.62]
LIVE-Wild        corr =  0.14  rmse =  0.81  percentiles [13603.98,16177.82,16803.55,17976.41,30956.98]

average          corr =  0.13  rmse =  0.86
pooled           corr =  0.13  rmse =  0.88  percentiles [12260.71,16394.13,16861.12,17688.51,32629.01]
```

![](images/report_lbp.png)

